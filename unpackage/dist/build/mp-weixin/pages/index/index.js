(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"00cc":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return n}));var n={uTopTips:function(){return o.e("uview-ui/components/u-top-tips/u-top-tips").then(o.bind(null,"df9b"))},uSticky:function(){return o.e("uview-ui/components/u-sticky/u-sticky").then(o.bind(null,"5399"))},uTabs:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-tabs/u-tabs")]).then(o.bind(null,"137c"))},uSearch:function(){return o.e("uview-ui/components/u-search/u-search").then(o.bind(null,"cd56"))},uSwiper:function(){return o.e("uview-ui/components/u-swiper/u-swiper").then(o.bind(null,"bbb4"))},uGrid:function(){return o.e("uview-ui/components/u-grid/u-grid").then(o.bind(null,"fa0e"))},uGridItem:function(){return o.e("uview-ui/components/u-grid-item/u-grid-item").then(o.bind(null,"9f59"))},uTag:function(){return o.e("uview-ui/components/u-tag/u-tag").then(o.bind(null,"ba3e"))},uDivider:function(){return o.e("uview-ui/components/u-divider/u-divider").then(o.bind(null,"3c84"))},uLoading:function(){return o.e("uview-ui/components/u-loading/u-loading").then(o.bind(null,"c911"))},uniTransition:function(){return o.e("components/uni-transition/uni-transition").then(o.bind(null,"bda7"))},uBackTop:function(){return o.e("uview-ui/components/u-back-top/u-back-top").then(o.bind(null,"f1a6"))},uSkeleton:function(){return o.e("uview-ui/components/u-skeleton/u-skeleton").then(o.bind(null,"3a3e"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.GoodsRecommend,(function(e,o){var n=t.__get_orig(e),i=t.computePrice(e.min_group_price/100,e.coupon_discount/100);return{$orig:n,m0:i}}))),n={position:"fixed",right:"20rpx",bottom:"300rpx"};t.$mp.data=Object.assign({},{$root:{l0:o,a0:n}})},s=[]},"6ec5":function(t,e,o){"use strict";o.r(e);var n=o("b38f"),i=o.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"76bd":function(t,e,o){"use strict";var n=o("e772"),i=o.n(n);i.a},"846e":function(t,e,o){"use strict";(function(t){o("ad08");n(o("66fd"));var e=n(o("e10c"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},b38f:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{anishow:!1,stickyenable:!1,GoodsOptList:[],GoodsOptCurrent:0,GoodsOptChildList:[],scrollTop:0,scrollTopShow:600,searchKeyWord:"",PageLoading:!1,MenuList:[],ActivitList:[],IsRequestGoodsRecommend:!1,GoodsRecommend:[],GoodsRecommendSearch_id:"",GoodsRecommendList_id:"",GoodsRecommendPage:1,GoodsRecommendPageSize:30,dicParam:{}}},onLoad:function(){var e=this,o=this;t.hideTabBar({animation:!1}),this.PageLoading=!0,o.InitPageMenu(),o.InitGoodsRecommendData(),setTimeout((function(){e.PageLoading=!1}),2e3)},onPageScroll:function(t){t.scrollTop>100&&(this.stickyenable=!0),t.scrollTop+100>=this.scrollTopShow?this.anishow=!0:this.anishow=!1,this.scrollTop=t.scrollTop},onReachBottom:function(){this.IsRequestGoodsRecommend||(this.GoodsRecommendPage=this.GoodsRecommendPage+1,this.InitGoodsRecommendData())},methods:{searchFun:function(){if(""!=this.searchKeyWord){var t="";this.GoodsOptList[this.GoodsOptCurrent].opt_id&&(t=this.GoodsOptList[this.GoodsOptCurrent].opt_id),this.$u.route("/pages/pSearchList/index",{keyword:this.searchKeyWord,opt_id:t})}else this.$refs.uTips.show({title:"请输入搜索关键词",type:"warning"})},ActivitClick:function(t){var e=this.ActivitList[t],o=JSON.parse(e.ActivityParam);this.$u.route(e.ActivityUrl,{key:o.activity_tags,title:e.ActivityName})},imgChaiHongBao:function(){var e=this,o={};o={channel_type:12,generate_we_app:!0,p_id_list:'["21457098_218367810"]'},e.$u.post("/app/AppDuoduoJuan/GenerateRpPromUrl",o).then((function(e){if(e.Issuccess){var o=e.Data.url_list[0];t.navigateToMiniProgram({appId:o.we_app_info.app_id,path:o.we_app_info.page_path,success:function(t){}})}})).catch((function(t){console.log(t)}))},uGridClick:function(e){var o=this;if("CmsPromUrl"==e.MenuType){var n={};n={generate_we_app:!0,channel_type:e.MenuParam[0].channel_type,p_id_list:"['"+e.MenuParam[0].p_id+"']"},o.$u.post("/app/AppDuoduoJuan/GenerateCmsPromUrl",n).then((function(e){if(e.Issuccess){var o=e.Data.url_list[0];t.navigateToMiniProgram({appId:o.we_app_info.app_id,path:o.we_app_info.page_path,success:function(t){}})}})).catch((function(t){console.log(t)}))}else if("ResourceUrl"==e.MenuType){var i={generate_we_app:!0,resource_type:e.MenuParam[0].resource_type,pid:e.MenuParam[0].pid};o.$u.post("/app/AppDuoduoJuan/GenerateResourceUrl",i).then((function(e){if(e.Issuccess){var o=e.Data.we_app_info;t.navigateToMiniProgram({appId:o.app_id,path:o.page_path,success:function(t){}})}})).catch((function(t){console.log(t)}))}else"PageUrl"==e.MenuType&&this.$u.route(e.MenuPage,{title:e.MenuTitle,channel_type:e.MenuParam[0].channel_type})},computePrice:function(t,e){return parseFloat(t-e).toFixed(2)},InitPageMenu:function(){var t=this,e=this;e.$u.post("/app/AppDuoduoJuan/GetMenuconfig").then((function(o){if(t.PageLoading=!1,o.Issuccess){var n=o.Data.MenuJson,i=o.Data.ActivitList,s=o.Data.HeaderTabs,a=JSON.parse(s);e.MenuList=JSON.parse(n),e.ActivitList=JSON.parse(i),e.GoodsOptList=[],a.forEach((function(t){e.GoodsOptList.push({name:t.opt_name,opt_id:t.opt_id})}))}})).catch((function(t){console.log(t)}))},GoodsOptChange:function(t){if(this.GoodsOptCurrent=t,this.GoodsOptList[t].opt_id){var e=this.GoodsOptList[t].opt_id;this.GoodsOptChildList=[],this.GetGoodsOptListByParentID(e),this.GoodsRecommend=[],this.GoodsRecommendPage=1,this.dicParam.opt_id=e,this.dicParam.list_id&&(this.dicParam.list_id=""),this.InitGoodsRecommendData()}},childOptClick:function(t){var e=this.GoodsOptChildList[t];this.$u.route("/pages/plist/index",{action:"opt",opt_id:e.opt_id,opt_name:e.opt_name})},InitGoodsRecommendData:function(){var t=this;t.IsRequestGoodsRecommend=!0;var e={page:t.GoodsRecommendPage,page_size:t.GoodsRecommendPageSize,activity_tags:"['10564','24','4','7']",channel_type:4,use_customized:"true",with_coupon:"true"};t.dicParam&&(e=this.$u.deepMerge(t.dicParam,e)),t.GoodsRecommendList_id&&(e.list_id=t.GoodsRecommendList_id),this.$u.post("/app/AppDuoduoJuan/GetGoodsSearchList",e).then((function(e){t.IsRequestGoodsRecommend=!1,e.Issuccess&&(e.Data.goods_list.forEach((function(e){t.GoodsRecommend.push(e)})),t.GoodsRecommendSearch_id=e.Data.search_id,e.Data.list_id&&(t.GoodsRecommendList_id=e.Data.list_id))})).catch((function(e){t.IsRequestGoodsRecommend=!1,console.log(e)}))},GetGoodsOptListByParentID:function(t){var e=this,o={parent_opt_id:t};e.$u.post("/app/AppDuoduoJuan/GetGoodsOptInfo",o).then((function(t){t.Issuccess&&(e.GoodsOptChildList=[],t.Data.goods_opt_list&&t.Data.goods_opt_list.length>0&&(e.GoodsOptChildList=t.Data.goods_opt_list))})).catch((function(t){console.log(t)}))},gotoDetail:function(t){this.$u.route("/pages/pdetail/index",{key:t.goods_sign,search_id:this.GoodsRecommendSearch_id})}}};e.default=o}).call(this,o("543d")["default"])},e10c:function(t,e,o){"use strict";o.r(e);var n=o("00cc"),i=o("6ec5");for(var s in i)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(s);o("76bd");var a,u=o("f0c5"),c=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,"bee1a318",null,!1,n["a"],a);e["default"]=c.exports},e772:function(t,e,o){}},[["846e","common/runtime","common/vendor"]]]);